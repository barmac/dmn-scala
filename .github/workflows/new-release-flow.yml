
#        deploys a SNAPSHOT
# If this workflow is triggered by publishing a Release, it
#        deploys a RELEASE with the selected version
#        updates the project version by incrementing the patch version
#        commits the version update change to the repository's default branch.
name: Deploy artifacts with Maven
on:
  push:
    branches: [master]
  release:
    types: [published]
jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Checkout GitHub Action Repo
      uses: actions/checkout@v2
      with:
        repository: camunda/community-action-maven-release
        ref: master
        path: .github/actions/community-action-maven-release
    - name: Perform Release
      uses: ./.github/actions/community-action-maven-release
      with:
        vaultAddress: ${{ secrets.VAULT_ADDR }}
        vaultRoleId: ${{ secrets.VAULT_ROLE_ID }}
        vaultSecretId: ${{ secrets.VAULT_SECRET_ID }}
        vaultSecretPath: secret/data/common/github.com/actions/camunda
